- [x] Install cookie-parser if not present
- [x] Update server.js to use cookie-parser
- [x] Update middlewares/auth.js: modify authenticateToken to check req.cookies.token
- [x] Update controllers/userController.js: modify loginUser to generate JWT and set in cookie; update getUserProfile, purchaseMedicines, clearPurchasedMedicines, bookAppointment to use req.user instead of req.session.user
- [x] Update routes/userRoutes.js: add authenticateToken middleware to protected routes (/profile, /user, /purchase, /clear-medicines, /book-appointment)
- [x] Update logoutUser to clear JWT cookie
- [x] Add optionalAuth middleware to page routes for JWT persistence
- [x] Update header.ejs to check req.user for login status
- [x] Test: login, refresh page, check if authenticated
- [x] Revert all changes back to session-based authentication
